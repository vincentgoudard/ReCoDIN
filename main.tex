% TODO : double entrie in media music room index
% mettre aussi Varèse aux côté de Cage dasn le préambule en ce qui concerne l'art des sons organisés
% remplacer appendices par annexes
% tout le jury en entête
% un mot sur Derrida pour la grammatologie

%% LLT: Turn off some annoying warnings...
\RequirePackage{silence}
\WarningFilter{titlesec}{Non standard sectioning command}
\WarningFilter{scrreprt}{Usage of package}
\WarningFilter{scrreprt}{Activating an ugly workaround}

% !TEX TS–program = pdflatexmk

% **************************************************
% Document Class Definition
% **************************************************
\documentclass[%
	paper=A4,					% paper size --> A4 is default in Germany
	twoside=true,				% onesite or twoside printing
	openright,					% doublepage cleaning ends up right side
	parskip=full,				% spacing value / method for paragraphs, set to half for printing
	chapterprefix=true,			% prefix for chapter marks
	11pt,						% font size
	headings=normal,			% size of headings
	bibliography=totoc,			% include bib in toc
	listof=totoc,				% include listof entries in toc
	titlepage=on,				% own page for each title page
	captions=tableabove,		% display table captions above the float env
	draft=false,				% value for draft version
]{scrreprt}%

% \usepackage{draftwatermark}
% \SetWatermarkAngle{55}
% \SetWatermarkLightness{0.9}
% \SetWatermarkScale{1.6}

\usepackage{imakeidx}
\makeindex[name=people,title=Artistes et œuvres cités, intoc]
\indexsetup{level=document}
%\makeindex[name=works,title=Index des œuvres citées]


% for highlight
\usepackage{soulutf8}

% utile pour inclure des figures pdf 1.7, par défaut =5 (pour pdf 1.5)
\pdfminorversion=7

% for text warping around figures
\usepackage{wrapfig}

% for placing figure "exactly here"
\usepackage{float}

\usepackage{breakurl}

% **************************************************
% Debug LaTeX Information
% **************************************************
%\listfiles

% **************************************************
% Load and Configure Packages
% **************************************************
\usepackage[utf8]{inputenc}		% defines file's character encoding
\usepackage[french, english]{babel} % babel system, adjust the language of the content
\usepackage[					% clean thesis style
	figuresep=colon,%
	sansserif=false,%
	hangfigurecaption=false,%
	hangsection=true,%
	hangsubsection=true,%
	colorize=full,%
	colortheme=bluemagenta,%
% LLT: Use biber if using UTF8 encoding
% 	bibsys=bibtex,%
	bibsys=biber,%
	bibfile=./thesis.bib,%
	bibstyle=alphabetic,%
]{cleanthesis}

\bibliography{thesis.bib}

%\usepackage[yyyymmdd,hhmmss]{datetime}

\hypersetup{					% setup the hyperref-package options
	%pdftitle={\thesisTitle},	% 	- title (PDF meta)   (VG : ne fonctionne pas)
	%pdfsubject={\thesisSubject},% 	- subject (PDF meta) (VG : ne fonctionne pas)
	%pdfauthor={\thesisName},	% 	- author (PDF meta) (VG : ne fonctionne pas)
	plainpages=false,			% 	-
	colorlinks=false,			% 	- colorize links?
	pdfborder={0 0 0},			% 	-
	breaklinks=true,			% 	- allow line break inside links
	bookmarksnumbered=true,		%
	bookmarksopen=true			%
}
%\def\UrlBreaks{\do\/\do-}

% for multiple figures
\usepackage{subcaption}

% always break URLs anywhere!
\setcounter{biburllcpenalty}{9000} % lower letters
\setcounter{biburlucpenalty}{9000} % upper letters

% shortcut for siècle
\def\siecle#1{\textsc{\romannumeral #1}\textsuperscript{e}}

% big line in tables
\newcommand\hkrule[1]{\noalign{\hrule height #1}}
\usepackage{tabularx}
\usepackage{diagbox} 

\newlength{\conditionwd}
\newenvironment{conditions}[1][où:]
  {%
   #1\tabularx{\textwidth-\widthof{#1}}[t]{
     >{$}l<{$} @{${}={}$} X@{}
   }%
  }
  {\endtabularx\\[\belowdisplayskip]}

% **************************************************
% tcolorbox to make nice framed texts
% **************************************************

\definecolor{akindofblue}{RGB}{0,101,152} % same color as titles

\usepackage{tcolorbox}% http://ctan.org/pkg/tcolorbox

\newtcolorbox{textbox}{colback=red!5!white,colframe=red!75!black}
\newtcolorbox{titlebox}[1]{colback=akindofblue!5!white,colframe=akindofblue,fonttitle=\bfseries,title=#1}
\newtcolorbox{notebox}[1]{colback=gray!5!white,colframe=gray!75!black, boxrule=1pt,leftrule=10pt,arc=0pt,auto outer arc}

\newtcolorbox{reviewbox}[1]{colback=red!5!white,colframe=red,fonttitle=\bfseries,title=#1}

% todo box
\newtcolorbox{todobox}[1]{colback=red!5!white,colframe=red!75!black,fonttitle=\bfseries,title=#1, left=0pt,right=0pt,top=0pt,bottom=0pt, boxrule=.5pt}
\newcommand\todo[1]{
	\marginpar{
		\begin{todobox}{\flushleft TODO}
			\flushleft\scriptsize\textcolor{black}{#1}
		\end{todobox}
	}
}

\newcommand\Pierre[1]{
		\begin{reviewbox}{Pierre}
			\flushleft\scriptsize\textcolor{black}{#1}
		\end{reviewbox}
}

\newcommand\Hugues[1]{
		\begin{reviewbox}{Hugues}
			\flushleft\scriptsize\textcolor{black}{#1}
		\end{reviewbox}
}


\newcommand\extra[1]{
		\begin{notebox}
			\flushleft\scriptsize\textcolor{black}{#1}
		\end{notebox}
}

%\newcommand{\hl}[1]{{\colorbox{yellow}{\parbox{\textidth}{10cm}}{#1}}}
    %\deffootnote[<width of mark>]
    %   {<indent of footnote text>}
    %   {<paragraph indent in the footnote text>}
    %   {<definition of mark>}

% **************************************************
% Footnotes indentation
% **************************************************

\newcommand*\footnotemarkspace{\normalparindent} % set distance of the footnote text from the margin
\deffootnote{\footnotemarkspace}% use distance from above
  {\parindent}% paragraph indent in footnotes (footnotes should never have paragraphs!)
  {\makebox[\footnotemarkspace][l]{\footfont\phantom{99}\llap{\thefootnotemark}.}} % footfont with period for footnote marks in footnote
\newlength{\normalparindent}
\AtBeginDocument{\setlength{\normalparindent}{\parindent}}


% **************************************************
% custom wrapfig
% **************************************************

\newenvironment{vgwrapfig}
 {%
%  \setlength{\intextsep}{0pt}% <--- Wrong!
  \setlength{\columnsep}{15pt}%
  \wrapfloat{figure}%
 }
 {\endwrapfloat}


% **************************************************
% Glossary of acronyms
% **************************************************
\usepackage[acronym, nogroupskip]{glossaries}

%Alternative glossary for top-level domains
%\newglossary[tlg]{domain}{tld}{tdn}{Top-Level Domains}

\setlength{\glsdescwidth}{0.5\textwidth}
\makenoidxglossaries
\loadglsentries{content/glossary}

% define glossary for Noms propres
%\loadglsentries{content/glossaryNames}
\glstoctrue


%% modsuper glossary display style (pour ne pas avoir de marge à gauche)
%% cf. : https://tex.stackexchange.com/questions/415275/flush-glossaries-super-style-to-left
%\newglossarystyle{modsuper}{%
%	\glossarystyle{super}%
%	\renewenvironment{theglossary}%
%		{\tablehead{}\tabletail{}%
%    	 \begin{supertabular}{@{}lp{\glsdescwidth}}}%<----no margin
%    	{\end{supertabular}}%
%		\renewcommand{\glsgroupskip}{}%
%		\renewcommand*{\glossaryentryfield}[5]{%
%			\glsentryitem{##1}\glstarget{##1}{##2} & ##3\glspostdescription\space ##5\\[2pt]}%nogroupskip
%}
\definecolor{oxfordblue}{rgb}{0.0, 0.13, 0.28}
\definecolor{mediumpersianblue}{rgb}{0.0, 0.3, 0.5}
\definecolor{royalblue}{rgb}{0.0, 0.14, 0.4}
\definecolor{prussianblue}{rgb}{0.0, 0.2, 0.4}
\definecolor{cerulean}{rgb}{0.0, 0.48, 0.65}
\definecolor{myBlue}{rgb}{0.0, 0.3, 0.5}
%\definecolor{glscolor}{rgb}{0.1, 0.4, 0.6} %kinda darkcerulean
\definecolor{glscolor}{rgb}{0.4, 0., 0.} %kinda darkcerulean

\renewcommand*{\glstextformat}[1]{\textcolor{glscolor}{#1}}



% **************************************************
% Annexes
% **************************************************
\usepackage[toc,page]{appendix}

% **************************************************
% TODOs
% **************************************************
\usepackage{marginnote}
\newcommand\note[1]{\textcolor{blue}{\scriptsize#1}}
\newcommand\unsure[1]{\marginpar{\scriptsize\textcolor{magenta}{#1}}}
\newcommand\info[1]{\marginpar{\scriptsize\textcolor{ForestGreen}{#1}}}
%\newcommand\todo[1]{\marginpar{\flushleft\scriptsize\textcolor{red}{TODO:\\#1}}}

%\newcommand\test[1]{\noindent\fbox{\parbox{\textwidth}{#1}}}

% **************************************************
% Inline quotes style
% **************************************************
\DeclareQuoteStyle{inlinequote}
    {\itshape\textquotedblleft}
    [\textquotedblleft]
    {\textquotedblright}
    	[0.05em]
    {\textquoteleft}
    {\textquoteright}

\newcommand{\iquote}[1]{{\setquotestyle{inlinequote}\enquote{#1}}}
 
% **************************************************
% Information and Commands for Reuse
% **************************************************
\newcommand{\thesisTitle}{Représentation et contrôle\\dans le design interactif des\\instruments de musique numériques}
\newcommand{\thesisTitleCaps}{REPRÉSENTATION ET CONTRÔLE\\DANS LE DESIGN INTERACTIF DES\\INSTRUMENTS DE MUSIQUE NUMÉRIQUES}
\newcommand{\thesisName}{Vincent Goudard}
\newcommand{\thesisSubject}{Ecole doctorale SMAER (ED 391)}
\newcommand{\thesisDate}{2019}
\newcommand{\thesisVersion}{\today}
%\newcommand{\thesisVersion}{\today\ — \currenttime}

\newcommand{\thesisFirstReviewer}{Myriam Desainte-Catherine}
\newcommand{\thesisFirstReviewerPosition}{professeure}
\newcommand{\thesisFirstReviewerUniversity}{\protect{Bordeaux INP}}
\newcommand{\thesisFirstReviewerDepartment}{Laboratoire Bordelais de Recherche en Informatique (LaBRI)}
\newcommand{\thesisFirstReviewerJury}{rapporteuse}

\newcommand{\thesisSecondReviewer}{Laurent Pottier}
\newcommand{\thesisSecondReviewerPosition}{professeur}
\newcommand{\thesisSecondReviewerUniversity}{\protect{Université Jean Monnet, Saint-Étienne}}
\newcommand{\thesisSecondReviewerDepartment}{Centre Interdisciplinaire d'Etudes et de Recherches sur l'Expression Contemporaine (CIEREC)}
\newcommand{\thesisSecondReviewerJury}{rapporteur}

\newcommand{\thesisThirdReviewer}{Marcelo M. Wanderley}
\newcommand{\thesisThirdReviewerPosition}{professeur}
\newcommand{\thesisThirdReviewerUniversity}{\protect{Université McGill, Montréal}}
\newcommand{\thesisThirdReviewerJury}{examinateur}

\newcommand{\thesisFourthReviewer}{Brigitte d'Andréa-Novel}
\newcommand{\thesisFourthReviewerPosition}{professeure}
\newcommand{\thesisFourthReviewerUniversity}{Sorbonne Université}
\newcommand{\thesisFourthReviewerJury}{examinatrice, présidente du jury}

\newcommand{\thesisFirstSupervisor}{Pierre Couprie}
\newcommand{\thesisFirstSupervisorPosition}{maître de conférences}
\newcommand{\thesisFirstSupervisorUniversity}{Sorbonne Université}

\newcommand{\thesisSecondSupervisor}{Jean-Dominique Polack}
\newcommand{\thesisSecondSupervisorPosition}{professeur}
\newcommand{\thesisSecondSupervisorUniversity}{Sorbonne Université}

\newcommand{\thesisFirstAdvisor}{Hugues Genevois}
\newcommand{\thesisFirstAdvisorPosition}{ingénieur de recherche}
\newcommand{\thesisFirstAdvisorUniversity}{Sorbonne Université}

\newcommand{\thesisUniversity}{\protect{Sorbonne Université}}
\newcommand{\thesisUniversityDepartment}{Équipe Lutherie Acoustique Musique - Institut $\partial$'Alembert}
\newcommand{\thesisUniversityInstitute}{Institut de Recherche en Musicologie (IReMus)}
\newcommand{\thesisUniversityCollegium}{Collegium Musicæ}

%\newcommand{\thesisUniversityGroup}{Collegium Musicæ}
\newcommand{\thesisUniversityCity}{PARIS}
\newcommand{\thesisUniversityStreetAddress}{4, place Jussieu}
\newcommand{\thesisUniversityPostalCode}{75252}


\graphicspath{{./gfx/}} %Where the figures folder is located

% do not indent each first paragraph after a \section
% cf. https://latex.org/forum/viewtopic.php?t=23250
% \titlespacing{\command}{left}{before-sep}{after-sep}[right-sep]
%\titlespacing*{\section}{0em}{.75em}{.2em}[0pt]
%\titlespacing*{\subsection}{0em}{.75em}{.2em}[0pt]
%\titlespacing*{\subsubsection}{-1.5em}{0em}{-1.5em}[0pt]

\usepackage[tight]{shorttoc}

% **************************************************
% Document CONTENT
% **************************************************
\begin{document}

% (un)comment this to switch from/to dark mode
%\pagecolor{gray!40}

% --------------------------
% rename document parts
% --------------------------
%\renewcaptionname{ngerman}{\figurename}{Abb.}	
%\renewcaptionname{ngerman}{\tablename}{Tab.}
\renewcaptionname{english}{\figurename}{Fig.}
\renewcaptionname{english}{\tablename}{Tab.}

% --------------------------
% Front matter
% --------------------------
\pagenumbering{roman}			% roman page numbing (invisible for empty page style)
\pagestyle{empty}				% no header or footers
\input{content/titlepages}		% INCLUDE: all titlepages

%\cleardoublepage

\pagestyle{plain}				% display just page numbers
\input{content/abstract}		% INCLUDE: the abstracts (english and french)

%\clearpage %

\input{content/acknowledgement} % INCLUDE: acknowledgement

\cleardoublepage
\selectlanguage{french}

%\shorttoc{Sommaire}{1}

\setcounter{tocdepth}{2}		% define depth of toc
\pdfbookmark{Table des matières}{contents} % put toc in pdf bookmarks (but not in TOC)
\tableofcontents				% display table of contents

%\cleardoublepage%

% --------------------------
% Body matter
% --------------------------
\pagenumbering{arabic}			% arabic page numbering
\setcounter{page}{1}			% set page counter
\pagestyle{maincontentstyle} 	% fancy header and footer
%\clearpage


%\part{Partie I} 
\input{content/01.preamble} % INCLUDE: preamble
\input{content/02.ephemeral_instruments} % INCLUDE: introduction
\input{content/03.musical_gesture} % INCLUDE: interface
\input{content/04.interfaces} % INCLUDE: interface
%\part{Partie II} 
\input{content/05.algorithms}	% INCLUDE: mapping
\input{content/06.visual_representation} % INCLUDE: visual_representatio
%\part{Partie III} 
\input{content/07.notation} % INCLUDE: notation
\input{content/conclusion} % INCLUDE: conclusion

%\input{content/latexsandbox}
\bookmarksetupnext{level=part}
\begin{appendices}
	%\input{content/appendix.interviews.tex}
	\input{content/appendix.delaubier} %ok 17/07/2017
	\input{content/appendix.dumeaux} % ok 30/07/2017
	\input{content/appendix.turchet} % ok 23/08/2017
	\input{content/appendix.zamborlin} % en cours 23/08/2017
	\input{content/appendix.collins} % ok 10/11/2017
	\input{content/appendix.mamoumani} % ok 20/12/2017
	\input{content/appendix.saintdenis} % ok 27/05/2018
	\input{content/appendix.bernier} % ok 28/05/2018
	\input{content/appendix.fernandez} % ok 13/06/2018
	
%	\input{content/appendix.algorithms} % 
\end{appendices}
\bookmarksetup{startatroot}

%\setlength{\parskip}{0mm} % moins d'espace entre les items (mais affect la suite ?)
%\singlespacing
\printnoidxglossaries
%\printglossaries
% \cleardoublepage
%\printglossary[type=domain]

\printindex[people]
%\printindex[works]

% --------------------------
% Back matter
% --------------------------
{%
\setstretch{1.1}
\renewcommand{\bibfont}{\normalfont\small}
\setlength{\biblabelsep}{0pt}
\setlength{\bibitemsep}{0.5\baselineskip plus 0.5\baselineskip}
\printbibliography[title={Bibliographie}, nottype=online]
%\printbibliography[heading=subbibliography,title={Sites web},type=online,prefixnumbers={@}]
}

\clearpage

\phantomsection
\addcontentsline{toc}{chapter}{\listfigurename}
\listoffigures

\noindent Les illustrations dont l'auteur.e n'est pas précisé ont été réalisées par l'auteur de la thèse et sont sous licence Creative Commons CC BY-NC-SA.

%\clearpage

\phantomsection
\addcontentsline{toc}{chapter}{\listtablename}
\listoftables

\clearpage

\input{content/colophon}

%\cleardoublepage

%\input{content/declaration}
%\clearpage
\newpage
\mbox{}

% **************************************************
% End of Document CONTENT
% **************************************************


\end{document}
