%% LLT: Turn off some annoying warnings...
\RequirePackage{silence}
\WarningFilter{titlesec}{Non standard sectioning command}
\WarningFilter{scrreprt}{Usage of package}
\WarningFilter{scrreprt}{Activating an ugly workaround}

% !TEX TS–program = pdflatexmk

% **************************************************
% Document Class Definition
% **************************************************
\documentclass[%
	paper=A4,					% paper size --> A4 is default in Germany
	twoside=true,				% onesite or twoside printing
	openright,					% doublepage cleaning ends up right side
	parskip=full,				% spacing value / method for paragraphs
	chapterprefix=true,			% prefix for chapter marks
	11pt,						% font size
	headings=normal,			% size of headings
	bibliography=totoc,			% include bib in toc
	listof=totoc,				% include listof entries in toc
	titlepage=on,				% own page for each title page
	captions=tableabove,		% display table captions above the float env
	draft=false,				% value for draft version
]{scrreprt}%


% for highlight
\usepackage{soulutf8}

% **************************************************
% Debug LaTeX Information
% **************************************************
%\listfiles

% **************************************************
% Load and Configure Packages
% **************************************************
\usepackage[utf8]{inputenc}		% defines file's character encoding
\usepackage[french, english]{babel} % babel system, adjust the language of the content
\usepackage[					% clean thesis style
	figuresep=colon,%
	sansserif=false,%
	hangfigurecaption=false,%
	hangsection=true,%
	hangsubsection=true,%
	colorize=full,%
	colortheme=bluemagenta,%
% LLT: Use biber if using UTF8 encoding
% 	bibsys=bibtex,%
	bibsys=biber,%
	bibfile=./thesis.bib,%
	bibstyle=alphabetic,%
]{cleanthesis}

\bibliography{thesis.bib}

\usepackage[yyyymmdd,hhmmss]{datetime}

\hypersetup{					% setup the hyperref-package options
	%pdftitle={\thesisTitle},	% 	- title (PDF meta)   (VG : ne fonctionne pas)
	%pdfsubject={\thesisSubject},% 	- subject (PDF meta) (VG : ne fonctionne pas)
	%pdfauthor={\thesisName},	% 	- author (PDF meta) (VG : ne fonctionne pas)
	plainpages=false,			% 	-
	colorlinks=false,			% 	- colorize links?
	pdfborder={0 0 0},			% 	-
	breaklinks=true,			% 	- allow line break inside links
	bookmarksnumbered=true,		%
	bookmarksopen=true			%
}

% for multiple figures
\usepackage{subcaption}


% **************************************************
% tcolorbox to make nice framed texts
% **************************************************

\definecolor{akindofblue}{RGB}{0,101,152} % same color as titles

\usepackage{tcolorbox}% http://ctan.org/pkg/tcolorbox

\newtcolorbox{textbox}{colback=red!5!white,colframe=red!75!black}
\newtcolorbox{titlebox}[1]{colback=akindofblue!5!white,colframe=akindofblue,fonttitle=\bfseries,title=#1}
\newtcolorbox{notebox}[1]{colback=gray!5!white,colframe=gray!75!black, boxrule=1pt,leftrule=10pt,arc=0pt,auto outer arc}

\newtcolorbox{reviewbox}[1]{colback=red!5!white,colframe=red,fonttitle=\bfseries,title=#1}

% todo box
\newtcolorbox{todobox}[1]{colback=red!5!white,colframe=red!75!black,fonttitle=\bfseries,title=#1, left=0pt,right=0pt,top=0pt,bottom=0pt, boxrule=.5pt}
\newcommand\todo[1]{
	\marginpar{
		\begin{todobox}{\flushleft TODO}
			\flushleft\scriptsize\textcolor{black}{#1}
		\end{todobox}
	}
}

\newcommand\Pierre[1]{
		\begin{reviewbox}{Pierre}
			\flushleft\scriptsize\textcolor{black}{#1}
		\end{reviewbox}
}

\newcommand\Hugues[1]{
		\begin{reviewbox}{Hugues}
			\flushleft\scriptsize\textcolor{black}{#1}
		\end{reviewbox}
}

%\newcommand{\hl}[1]{{\colorbox{yellow}{\parbox{\textidth}{10cm}}{#1}}}


% **************************************************
% Glossary of acronyms
% **************************************************
\usepackage[acronym, nogroupskip]{glossaries}
\setlength{\glsdescwidth}{0.5\textwidth}
\makenoidxglossaries
\loadglsentries{content/glossary}
\glstoctrue

%% modsuper glossary display style (pour ne pas avoir de marge à gauche)
%% cf. : https://tex.stackexchange.com/questions/415275/flush-glossaries-super-style-to-left
\newglossarystyle{modsuper}{%
	\glossarystyle{super}%
	\renewenvironment{theglossary}%
		{\tablehead{}\tabletail{}%
    	 \begin{supertabular}{@{}lp{\glsdescwidth}}}%<----no margin
    	{\end{supertabular}}%
		\renewcommand{\glsgroupskip}{}%
		\renewcommand*{\glossaryentryfield}[5]{%
			\glsentryitem{##1}\glstarget{##1}{##2} & ##3\glspostdescription\space ##5\\[2pt]}%nogroupskip
}

% **************************************************
% Annexes
% **************************************************
\usepackage[toc,page]{appendix}

% **************************************************
% TODOs
% **************************************************
\usepackage{marginnote}
\newcommand\note[1]{\textcolor{blue}{\scriptsize#1}}
\newcommand\unsure[1]{\marginpar{\scriptsize\textcolor{magenta}{#1}}}
\newcommand\info[1]{\marginpar{\scriptsize\textcolor{ForestGreen}{#1}}}
%\newcommand\todo[1]{\marginpar{\flushleft\scriptsize\textcolor{red}{TODO:\\#1}}}

%\newcommand\test[1]{\noindent\fbox{\parbox{\textwidth}{#1}}}

% **************************************************
% Inline quotes style
% **************************************************
\DeclareQuoteStyle{inlinequote}
    {\itshape\textquotedblleft}
    [\textquotedblleft]
    {\textquotedblright}
    	[0.05em]
    {\textquoteleft}
    {\textquoteright}

\newcommand{\iquote}[1]{{\setquotestyle{inlinequote}\enquote{#1}}}
 
% **************************************************
% Information and Commands for Reuse
% **************************************************
\newcommand{\thesisTitle}{Représentation et contrôle dans le design \\
						interactif des instruments de musique numériques}
\newcommand{\thesisName}{Vincent Goudard}
\newcommand{\thesisSubject}{Ecole doctorale SMAER}
\newcommand{\thesisDate}{2019}
\newcommand{\thesisVersion}{\today\ — \currenttime}

\newcommand{\thesisFirstReviewer}{Myriam  Desainte-Catherine}
\newcommand{\thesisFirstReviewerUniversity}{\protect{Université de Bordeaux}}
\newcommand{\thesisFirstReviewerDepartment}{Laboratoire Bordelais de Recherche en Informatique (LaBRI)}

\newcommand{\thesisSecondReviewer}{Laurent Pottier}
\newcommand{\thesisSecondReviewerUniversity}{\protect{Université Jean Monnet, Saint-Étienne}}
\newcommand{\thesisSecondReviewerDepartment}{Centre Interdisciplinaire d'Etudes et de Recherches sur l'Expression Contemporaine (CIEREC)}

\newcommand{\thesisFirstSupervisor}{Pierre Couprie}
\newcommand{\thesisSecondSupervisor}{Jean-Dominique Polack}
\newcommand{\thesisFirstAdvisor}{Hugues Genevois}

\newcommand{\thesisUniversity}{\protect{Sorbonne Université}}
\newcommand{\thesisUniversityDepartment}{Equipe Lutherie Acoustique Musique - Institut $\partial$'Alembert}
\newcommand{\thesisUniversityInstitute}{Institut de Recherche en Musicologie (IReMus)}
%\newcommand{\thesisUniversityGroup}{Collegium Musicæ}
\newcommand{\thesisUniversityCity}{PARIS}
\newcommand{\thesisUniversityStreetAddress}{4, Place Jussieu}
\newcommand{\thesisUniversityPostalCode}{75252}


\graphicspath{{./gfx/}} %Where the figures folder is located

% do not indent each first paragraph after a \section
% cf. https://latex.org/forum/viewtopic.php?t=23250
% \titlespacing{\command}{left}{before-sep}{after-sep}[right-sep]
%\titlespacing*{\section}{0em}{.75em}{.2em}[0pt]
%\titlespacing*{\subsection}{0em}{.75em}{.2em}[0pt]
%\titlespacing*{\subsubsection}{-1.5em}{0em}{-1.5em}[0pt]


% **************************************************
% Document CONTENT
% **************************************************
\begin{document}

% (un)comment this to switch from/to dark mode
%\pagecolor{gray!40}

% --------------------------
% rename document parts
% --------------------------
%\renewcaptionname{ngerman}{\figurename}{Abb.}	
%\renewcaptionname{ngerman}{\tablename}{Tab.}
\renewcaptionname{english}{\figurename}{Fig.}
\renewcaptionname{english}{\tablename}{Tab.}

% --------------------------
% Front matter
% --------------------------
\pagenumbering{roman}			% roman page numbing (invisible for empty page style)
\pagestyle{empty}				% no header or footers
\input{content/titlepages}		% INCLUDE: all titlepages

%\cleardoublepage

\pagestyle{plain}				% display just page numbers
\input{content/abstract}		% INCLUDE: the abstracts (english and german)

%\clearpage %

\input{content/acknowledgement} % INCLUDE: acknowledgement

\cleardoublepage
\selectlanguage{french}
\setcounter{tocdepth}{2}		% define depth of toc
\tableofcontents				% display table of contents

%\cleardoublepage%

% --------------------------
% Body matter
% --------------------------
\pagenumbering{arabic}			% arabic page numbering
\setcounter{page}{1}			% set page counter
\pagestyle{maincontentstyle} 	% fancy header and footer
%\clearpage


%\part{Partie I} 
\input{content/01.preamble} % INCLUDE: preamble
\input{content/02.ephemeral_instruments} % INCLUDE: introduction
\input{content/03.musical_gesture} % INCLUDE: interface
\input{content/04.interfaces} % INCLUDE: interface
%\part{Partie II} 
\input{content/05.algorithms}	% INCLUDE: mapping
\input{content/06.visual_representation} % INCLUDE: visual_representatio
%\part{Partie III} 
\input{content/07.notation} % INCLUDE: notation
\input{content/conclusion} % INCLUDE: conclusion


%\setlength{\parskip}{0mm} % moins d'espace entre les items (mais affect la suite ?)
\printnoidxglossaries
%\printglossaries
% \cleardoublepage



% --------------------------
% Back matter
% --------------------------
{%
\setstretch{1.1}
\renewcommand{\bibfont}{\normalfont\small}
\setlength{\biblabelsep}{0pt}
\setlength{\bibitemsep}{0.5\baselineskip plus 0.5\baselineskip}
\printbibliography[title={Références}, nottype=online]
%\printbibliography[heading=subbibliography,title={Sites web},type=online,prefixnumbers={@}]
}

\clearpage

\listoffigures
\addcontentsline{toc}{chapter}{\listfigurename}

\clearpage

\listoftables
\addcontentsline{toc}{chapter}{\listtablename}

\clearpage

\input{content/colophon}

%\cleardoublepage

\input{content/declaration}
\clearpage
\newpage
\mbox{}

% **************************************************
% End of Document CONTENT
% **************************************************

\begin{appendices}
\input{content/appendix.bernier} 
\input{content/appendix.collins} % ok
\input{content/appendix.dumeaux} 
\input{content/appendix.delaubier}
\input{content/appendix.fernandez} 
\input{content/appendix.mamoumani} % ok
\input{content/appendix.saintdenis} % ok
\input{content/appendix.turchet} % ok
\input{content/appendix.zamborlin} % en cours
\end{appendices}

\input{content/latexsandbox}

\end{document}
